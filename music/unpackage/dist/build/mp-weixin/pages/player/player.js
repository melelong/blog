(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/player/player"],{"0394":function(n,e,t){"use strict";t.r(e);var r=t("c2f9"),o=t.n(r);for(var a in r)"default"!==a&&function(n){t.d(e,n,(function(){return r[n]}))}(a);e["default"]=o.a},"2fee":function(n,e,t){},3715:function(n,e,t){"use strict";var r=t("2fee"),o=t.n(r);o.a},"4c60":function(n,e,t){"use strict";t.r(e);var r=t("8c2a"),o=t("0394");for(var a in o)"default"!==a&&function(n){t.d(e,n,(function(){return o[n]}))}(a);t("3715");var i,c=t("f0c5"),l=Object(c["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);e["default"]=l.exports},"726c":function(n,e,t){"use strict";(function(n){t("8d1d");r(t("66fd"));var e=r(t("4c60"));function r(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("543d")["createPage"])},"8c2a":function(n,e,t){"use strict";t.d(e,"b",(function(){return o})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return r}));var r={frImage:function(){return Promise.all([t.e("common/vendor"),t.e("components/fr-image/fr-image")]).then(t.bind(null,"7648"))}},o=function(){var n=this,e=n.$createElement;n._self._c},a=[]},c2f9:function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(t("a34a"));function o(n){return n&&n.__esModule?n:{default:n}}function a(n,e,t,r,o,a,i){try{var c=n[a](i),l=c.value}catch(u){return void t(u)}c.done?e(l):Promise.resolve(l).then(r,o)}function i(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function c(n){a(i,r,o,c,l,"next",n)}function l(n){a(i,r,o,c,l,"throw",n)}c(void 0)}))}}var c={data:function(){return{id:"",PlayState:!1,songurl:[],songlyric:[],current:0,go:"",downloadurl:"",platform:"",nowindex:0,songdetail:{title:"",img:"",singer:""}}},components:{},onUnload:function(){console.log("player Unload")},onLoad:function(e){var t=this;return i(r.default.mark((function o(){var a;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.id=e.id,r.next=3,t.getsongdetail(t.id);case 3:return r.next=5,t.getsongurl(t.id);case 5:return r.next=7,t.getsonglyric(t.id);case 7:n.setNavigationBarTitle({title:t.songdetail.title}),a=n.getBackgroundAudioManager(),null!==t.songurl?(a.src=t.songurl,a.title=t.songdetail.title,a.singer=t.songdetail.singer,a.coverImgUrl=t.songdetail.img,a.webUrl=t.songurl):n.showModal({title:"提示",content:"这歌没有版权",success:function(e){e.confirm?(console.log("用户点击确定"),n.navigateBack({delta:1})):e.cancel&&(console.log("用户点击取消"),n.navigateBack({delta:1}))}}),a.onStop((function(){console.log("停止")})),a.onPlay((function(){console.log("播放"),t.PlayState=!1})),a.onPause((function(){console.log("暂停"),t.PlayState=!0})),a.onTimeUpdate((function(){t.current=a.currentTime;for(var n=0;n<t.songlyric.length;n++)if(t.nowindex=n,t.current<t.songlyric[n].time){t.nowindex=n-1,t.go="abc_".concat(t.nowindex);break}})),a.onEnded((function(){console.log("播放结束");var e=n.getBackgroundAudioManager();e.src=t.songurl,e.title=t.songdetail.title,e.singer=t.songdetail.singer,e.coverImgUrl=t.songdetail.img,e.play()}));case 15:case"end":return r.stop()}}),o)})))()},methods:{changPlayState:function(){var e=n.getBackgroundAudioManager();this.PlayState?e.play():e.pause(),this.PlayState=!this.PlayState},moved:function(e){var t=n.getBackgroundAudioManager();t.seek(e),this.current=e},getsongdetail:function(n){var e=this;return i(r.default.mark((function t(){var o,a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request("/song/detail",{ids:n});case 2:o=t.sent,a=o,a?200===a.code&&(e.songdetail.img=a.songs[0].al.picUrl,e.songdetail.title=a.songs[0].name,e.songdetail.singer=a.songs[0].ar[0].name):console.log(o);case 5:case"end":return t.stop()}}),t)})))()},getsongurl:function(n){var e=this;return i(r.default.mark((function t(){var o,a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request("/song/url",{id:n});case 2:o=t.sent,a=o,a?200===a.code&&(e.songurl=a.data[0].url,null===e.songurl&&console.log(a.data[0])):console.log(o);case 5:case"end":return t.stop()}}),t)})))()},getsonglyric:function(n){var e=this;return i(r.default.mark((function t(){var o,a,i;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request("/lyric",{id:n});case 2:o=t.sent,a=o,a?200===a.code&&(a.nolyric?e.songlyric=[{time:0,str:"纯音乐，没有歌词"}]:a.uncollected?e.songlyric=[{time:0,str:"暂无歌词"}]:(i=a.lrc.lyric.split("["),i.forEach((function(n,t){var r=n.split("]"),o=r[0].split(":");""!==r[0]&&""!==r[1]&&e.songlyric.push({time:60*parseInt(o[0])+parseFloat(o[1]),str:r[1]})})))):console.log(songurldata);case 5:case"end":return t.stop()}}),t)})))()}}};e.default=c}).call(this,t("543d")["default"])}},[["726c","common/runtime","common/vendor"]]]);